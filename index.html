<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/>
  <meta name="mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <title>LumiRead</title>
  <link rel="manifest" href="manifest.json"/>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â• LANDING â•â•â•â•â•â•â•â•â•â• -->
<div id="screenLanding" class="screen active">
  <div class="land-nav">
    <div class="land-brand">ğŸ“– <strong>LumiRead</strong></div>
    <button id="themeToggleLib" class="icon-btn">ğŸŒ™</button>
  </div>
  <div class="land-hero">
    <div class="neon-tag">âš¡ Level up brothers âš¡</div>
    <h1 class="hero-h1">Your Books.<br/><em>Reimagined.</em></h1>
    <p class="hero-sub">Highlights Â· Notes Â· Bookmarks Â· Search</p>
    <label class="upload-box" id="uploadZone">
      <input type="file" id="fileInput" accept=".pdf" multiple hidden/>
      <div class="upload-ico">ğŸ“‚</div>
      <div class="upload-txt">Tap to upload PDF</div>
      <div class="upload-hint">Multiple files Â· Stored offline</div>
    </label>
  </div>
  <div class="lib-header">
    <h2>My Library</h2>
    <div class="lib-header-r">
      <input id="libSearch" class="lib-search" type="text" placeholder="Searchâ€¦"/>
      <button id="clearLibBtn" class="btn-danger-sm">Clear</button>
    </div>
  </div>
  <div id="libraryGrid" class="lib-grid">
    <div class="empty-lib"><span>ğŸ“š</span><p>No books yet â€” upload a PDF above!</p></div>
  </div>
  <div class="stats-row">
    <div class="stat-chip"><span>ğŸ”¥</span><b id="streakCount">0</b><small>streak</small></div>
    <div class="stat-chip"><span>â±ï¸</span><b id="totalTime">0m</b><small>today</small></div>
    <div class="stat-chip"><span>ğŸ“š</span><b id="bookCount">0</b><small>books</small></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• READER â•â•â•â•â•â•â•â•â•â• -->
<div id="screenReader" class="screen">
  <div class="rdr-top" id="rdrTop">
    <button id="backToLib" class="icon-btn">â—€</button>
    <span id="bookTitle" class="rdr-title">â€”</span>
    <div style="display:flex;gap:.25rem;margin-left:auto;flex-shrink:0">
      <button id="themeToggleReader" class="icon-btn">ğŸŒ™</button>
      <button id="menuBtn" class="icon-btn">â‹®</button>
    </div>
  </div>
  <div class="prog-strip"><div id="progFill" class="prog-fill"></div></div>
  <div id="pdfArea" class="pdf-area">
    <div id="pdfScroller" class="pdf-scroller">
      <div id="pdfPages" class="pdf-pages"></div>
    </div>
    <canvas id="drawCanvas" class="draw-canvas hidden"></canvas>
    <div id="stickyLayer" class="sticky-layer"></div>
  </div>
  <div class="rdr-bottom" id="rdrBottom">
    <button class="nav-arr" id="prevPage">â€¹</button>
    <div class="page-pill">
      <input type="number" id="pageInput" class="page-inp" min="1" value="1"/>
      <span class="page-sep">/<span id="totalPagesLabel">1</span></span>
    </div>
    <button class="nav-arr" id="nextPage">â€º</button>
    <div class="btm-divider"></div>
    <button class="btm-btn" id="notesTabBtn">ğŸ“</button>
    <button class="btm-btn" id="bookmarkTabBtn">ğŸ”–</button>
    <button class="btm-btn" id="searchTabBtn">ğŸ”</button>
    <button class="btm-btn" id="hiliteTabBtn">ğŸ–ï¸</button>
    <button class="btm-btn" id="moreTabBtn">ğŸ› ï¸</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• SHEETS â•â•â•â•â•â•â•â•â•â• -->
<div class="sheet-backdrop hidden" id="sheetBackdrop"></div>

<div class="sheet hidden" id="sheetNotes">
  <div class="sheet-drag"></div>
  <div class="sheet-hd"><span id="notesPgLbl" class="sheet-title">Notes</span><button class="sheet-x">âœ•</button></div>
  <div class="sheet-body">
    <textarea id="notesEditor" class="sheet-ta" placeholder="Write notes for this pageâ€¦"></textarea>
    <div class="sheet-row"><button id="saveNoteBtn" class="btn-primary">ğŸ’¾ Save</button><span id="noteSavedMsg" class="ok-msg"></span></div>
    <div class="sheet-list-hdr">All Notes</div>
    <div id="allNotesList" class="sheet-list"></div>
  </div>
</div>

<div class="sheet hidden" id="sheetBookmarks">
  <div class="sheet-drag"></div>
  <div class="sheet-hd"><span class="sheet-title">Bookmarks</span><button class="sheet-x">âœ•</button></div>
  <div class="sheet-body">
    <button id="addBookmarkBtn" class="btn-primary" style="width:100%">ğŸ”– Bookmark This Page</button>
    <div id="bmList" class="sheet-list" style="margin-top:.75rem"></div>
  </div>
</div>

<div class="sheet hidden" id="sheetSearch">
  <div class="sheet-drag"></div>
  <div class="sheet-hd"><span class="sheet-title">Search</span><button class="sheet-x">âœ•</button></div>
  <div class="sheet-body">
    <div class="search-row">
      <input id="searchInput" type="text" class="search-inp" placeholder="Search in PDFâ€¦"/>
      <button id="searchBtn" class="btn-go">Go</button>
    </div>
    <div class="search-nav">
      <button id="prevMatch" class="btn-nav">â†‘ Prev</button>
      <span id="matchLabel" class="match-lbl">0 / 0</span>
      <button id="nextMatch" class="btn-nav">Next â†“</button>
    </div>
    <div id="searchResults" class="sheet-list"></div>
  </div>
</div>

<div class="sheet hidden" id="sheetHilite">
  <div class="sheet-drag"></div>
  <div class="sheet-hd"><span class="sheet-title">Highlights</span><button class="sheet-x">âœ•</button></div>
  <div class="sheet-body">
    <p class="sheet-hint">Select text on the PDF, then tap a colour below.</p>
    <div id="swatchRow" class="swatch-row">
      <button class="swatch sel" data-col="#FFEAA7" style="background:#FFEAA7"></button>
      <button class="swatch" data-col="#81ECEC" style="background:#81ECEC"></button>
      <button class="swatch" data-col="#55EFC4" style="background:#55EFC4"></button>
      <button class="swatch" data-col="#FAB1A0" style="background:#FAB1A0"></button>
      <button class="swatch" data-col="#A29BFE" style="background:#A29BFE"></button>
      <button class="swatch" data-col="#FD79A8" style="background:#FD79A8"></button>
    </div>
    <div id="hiliteList" class="sheet-list"></div>
  </div>
</div>

<div class="sheet hidden" id="sheetMore">
  <div class="sheet-drag"></div>
  <div class="sheet-hd"><span class="sheet-title">Tools</span><button class="sheet-x">âœ•</button></div>
  <div class="sheet-body">
    <div class="tool-sec">Zoom</div>
    <div class="tool-row">
      <button class="tool-chip" id="zoomOut">âˆ’ Zoom Out</button>
      <span id="zoomLabel" class="zoom-disp">Auto</span>
      <button class="tool-chip" id="zoomIn">+ Zoom In</button>
    </div>
    <div class="tool-row">
      <button class="tool-chip tog" id="fitWidthBtn">â†” Fit Width</button>
      <button class="tool-chip tog" id="fitPageBtn">âŠ¡ Fit Page</button>
    </div>
    <button class="tool-full tog" id="scrollModeBtn">â‰¡ Continuous Scroll</button>
    <div class="tool-sec">Reading</div>
    <button class="tool-full tog" id="ttsBtn">ğŸ”Š Read Aloud</button>
    <button class="tool-full tog" id="focusBtn">ğŸ¯ Focus Mode</button>
    <div class="tool-sec">Draw</div>
    <button class="tool-full tog" id="drawBtn">âœï¸ Draw Mode</button>
    <div class="tool-row" style="align-items:center;gap:.6rem">
      <span class="tool-lbl">Colour:</span>
      <input type="color" id="drawColourPicker" value="#4F46E5" class="colour-pick"/>
    </div>
    <div class="tool-sec">Notes</div>
    <button class="tool-full" id="addStickyBtn">ğŸ—’ï¸ Add Sticky Note</button>
    <div class="tool-sec">Study</div>
    <button class="tool-full" id="studyModeBtn">ğŸ“– Study Mode</button>
    <button class="tool-full" id="genSummaryBtn">ğŸ§  Summary</button>
    <div id="summaryBox" class="summary-box"></div>
    <div class="tool-sec">Export</div>
    <button class="tool-full" id="exportTxtBtn">ğŸ“„ Export TXT</button>
    <button class="tool-full" id="exportMdBtn">ğŸ“ Export Markdown</button>
    <button class="tool-full" id="exportPdfBtn">ğŸ–¨ï¸ Print / PDF</button>
    <div class="tool-sec">Security</div>
    <button class="tool-full" id="lockBtn">ğŸ” Password Lock</button>
    <div class="tool-sec">Dictionary</div>
    <p class="sheet-hint">Double-tap any word on the PDF.</p>
    <div id="dictBox" class="dict-box"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• OVERLAYS â•â•â•â•â•â•â•â•â•â• -->
<div class="modal hidden" id="lockModal">
  <div class="modal-card">
    <div class="modal-ico">ğŸ”</div>
    <h3 id="lockModalTitle">Set Password</h3>
    <input type="password" id="lockInput" placeholder="Enter passwordâ€¦"/>
    <div class="modal-btns">
      <button class="btn-primary" id="lockConfirm">Confirm</button>
      <button class="btn-ghost" id="lockCancel">Cancel</button>
    </div>
  </div>
</div>

<div class="word-popup hidden" id="wordPopup">
  <button class="wp-x" id="wpClose">âœ•</button>
  <div class="wp-word" id="wpWord"></div>
  <div class="wp-phon" id="wpPhon"></div>
  <div class="wp-pos" id="wpPos"></div>
  <div class="wp-def" id="wpDef">Looking upâ€¦</div>
</div>

<div class="tts-bar hidden" id="ttsBar">
  ğŸ”Š <span id="ttsLabel">Readingâ€¦</span>
  <button id="ttsStopBtn" class="tts-stop">â–  Stop</button>
</div>

<!-- Floating highlight toolbar â€” shown after text selection -->
<div id="hlToolbar" class="hl-toolbar hidden">
  <button data-col="#FFEAA7" style="background:#FFEAA7" class="hl-tb-btn"></button>
  <button data-col="#81ECEC" style="background:#81ECEC" class="hl-tb-btn"></button>
  <button data-col="#55EFC4" style="background:#55EFC4" class="hl-tb-btn"></button>
  <button data-col="#FAB1A0" style="background:#FAB1A0" class="hl-tb-btn"></button>
  <button data-col="#A29BFE" style="background:#A29BFE" class="hl-tb-btn"></button>
  <button data-col="#FD79A8" style="background:#FD79A8" class="hl-tb-btn"></button>
  <button id="hlTbCopy" class="hl-tb-copy">ğŸ“‹</button>
</div>

<div class="toast" id="toast"></div>

<script src="app.js"></script>
</body>
</html>
